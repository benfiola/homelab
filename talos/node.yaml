machine:
  env:
    IMAGE: factory.talos.dev/metal-installer/e048aaf4461ff9f9576c9a42f760f2fef566559bd4933f322853ac291e46f238:v1.10.4
    K8S: 1.33.2
  kernel:
    modules:
      # configure drbd kernel modules (linstor)
      - name: dm_mod
      - name: dm_thin_pool
      - name: drbd
        parameters:
          - usermode_helper=disabled
      - name: drbd_transport_tcp
  kubelet:
    extraMounts:
      # configure r/w mounts (linstor)
      - destination: /var/local
        source: /var/local
        type: bind
        options:
          - rbind
          - rshared
          - rw
cluster:
  network:
    # disable cni (cilium)
    cni:
      name: none
  # disable kube-proxy (cilium)
  proxy:
    disabled: true
